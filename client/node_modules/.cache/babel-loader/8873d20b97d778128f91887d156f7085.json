{"ast":null,"code":"var _jsxFileName = \"D:\\\\webdev\\\\Project\\\\react\\\\crypto-dashboard\\\\client\\\\src\\\\pages\\\\dashboardpage\\\\Dashboard.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ClickAwayListener from \"react-click-away-listener\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectToken, setUser } from \"../../features/auth/authSlice\";\nimport { selectKeyword, setNews } from \"../../features/news/newsSlice\";\nimport { setCoins } from \"../../features/coins/coinsSlice\"; // Components\n\nimport Spinner from \"../../components/loader/Spinner.jsx\";\nimport CoinCard from \"../../components/coincard/CoinCard.jsx\";\nimport CoinBar from \"../../components/coinbar/CoinBar.jsx\";\nimport WatchList from \"../../components/watchlist/WatchList.jsx\";\nimport WatchListModal from \"../../components/watchlist/WatchListModal.jsx\";\nimport News from \"../../components/news/News.jsx\"; // Services\n\nimport { useGetCoinsQuery, useGetNewsQuery } from \"../../services/cryptoApi\"; // Firebase\n\nimport { db } from \"../../firebase/firebase.config\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  var _coinrankingApi$data;\n\n  const dispatch = useDispatch();\n  const token = useSelector(selectToken);\n  const keyword = useSelector(selectKeyword); // Get logged user's info from firebase after successful login\n\n  useEffect(() => {\n    if (token) {\n      console.log(token.id);\n\n      const getUser = () => {\n        onSnapshot(doc(db, \"users\", token.uid), doc => {\n          dispatch(setUser(doc.data()));\n        });\n      };\n\n      getUser();\n    }\n  }, [dispatch, token]);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [order, setOrder] = useState(\"sortByMarketCap\"); // Modal Handler\n\n  const modalToggle = () => {\n    setModalOpen(!modalOpen);\n  }; // Menu Handler\n\n\n  const menuToggle = () => {\n    setMenuOpen(!menuOpen);\n  };\n\n  const sortByMarketCap = () => {\n    setOrder(\"sortByMarketCap\");\n    setMenuOpen(!menuOpen);\n  };\n\n  const sortByVolume = () => {\n    setOrder(\"sortByVolume\");\n    setMenuOpen(!menuOpen);\n  }; // Coinranking API call\n\n\n  const {\n    data: coinrankingApi,\n    isFetching: isCoinsFetching\n  } = useGetCoinsQuery();\n  dispatch(setCoins(coinrankingApi === null || coinrankingApi === void 0 ? void 0 : (_coinrankingApi$data = coinrankingApi.data) === null || _coinrankingApi$data === void 0 ? void 0 : _coinrankingApi$data.coins)); // News API call\n\n  const {\n    data: newsApi,\n    isFetching: isNewsFetching\n  } = useGetNewsQuery({\n    keyword,\n    pageSize: \"4\"\n  });\n  dispatch(setNews(newsApi === null || newsApi === void 0 ? void 0 : newsApi.articles));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [(isCoinsFetching || isNewsFetching) && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full bg-red-500\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), !isCoinsFetching && !isNewsFetching && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"block w-full h-full 2xl:flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-10 2xl:py-0 2xl:pl-16 2xl:pr-8 2xl:w-2/3\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              className: \"flex items-center justify-between mt-10\",\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\",\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6\",\n              children: /*#__PURE__*/_jsxDEV(CoinCard, {\n                simplified: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"p-8 mt-10 bg-white drop-shadow-xl rounded-3xl dark:bg-secondary\",\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\",\n                  onClick: menuToggle,\n                  children: \"Top 15 Cryptocurrency by\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 21\n                }, this), menuOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                    onClickAway: menuToggle,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"absolute left-0 z-10 w-56 mt-2 origin-top-left bg-white rounded-lg shadow-lg dark:bg-secondary ring-1 ring-black ring-opacity-5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex px-4 py-3 text-gray-700 rounded-t-lg text-md hover:bg-gray-100 hover:text-gray-900 dark:text-gray-100 dark:hover:text-white dark:hover:bg-tertiary\",\n                        onClick: sortByMarketCap,\n                        children: \"MarketCap\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 124,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex px-4 py-3 text-gray-700 rounded-t-lg text-md hover:bg-gray-100 hover:text-gray-900 dark:text-gray-100 dark:hover:text-white dark:hover:bg-tertiary\",\n                        onClick: sortByVolume,\n                        children: \"Volume\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 131,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/coins\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"px-5 py-3 text-sm font-medium text-gray-500 transition-colors duration-200 rounded-lg dark:hover:bg-tertiary dark:text-gray-300 hover:bg-gray-200 font-header\",\n                  children: \"See all\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 gap-6 mt-6 md:grid-cols-2 2xl:grid-cols-3\",\n              children: /*#__PURE__*/_jsxDEV(CoinBar, {\n                order: order\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-10 2xl:py-0 2xl:pl-8 2xl:pr-16 2xl:w-1/3\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              className: \"flex items-center justify-between mt-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\",\n                children: \"Watchlist\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"p-2 transition-colors duration-200 rounded dark:hover:bg-tertiary hover:bg-gray-200 dark:text-gray-300\",\n                onClick: modalToggle,\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"w-6 h-6\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M12 4v16m8-8H4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6\",\n              children: [/*#__PURE__*/_jsxDEV(WatchList, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this), modalOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(WatchListModal, {\n                  modalOpen: modalOpen,\n                  setModalOpen: setModalOpen\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            children: [/*#__PURE__*/_jsxDEV(\"header\", {\n              className: \"flex items-center justify-between mt-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\",\n                children: \"News Feed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/news\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"px-5 py-3 text-sm font-medium text-gray-500 transition-colors duration-200 rounded-lg dark:hover:bg-tertiary dark:text-gray-300 hover:bg-gray-200 font-header\",\n                  children: \"See all\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6\",\n              children: /*#__PURE__*/_jsxDEV(News, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n\n_s(Dashboard, \"H6VylWnk6j0cUYjdhhOT88hBxPk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useGetCoinsQuery, useGetNewsQuery];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["D:/webdev/Project/react/crypto-dashboard/client/src/pages/dashboardpage/Dashboard.jsx"],"names":["useState","useEffect","Link","ClickAwayListener","useSelector","useDispatch","selectToken","setUser","selectKeyword","setNews","setCoins","Spinner","CoinCard","CoinBar","WatchList","WatchListModal","News","useGetCoinsQuery","useGetNewsQuery","db","doc","onSnapshot","Dashboard","dispatch","token","keyword","console","log","id","getUser","uid","data","modalOpen","setModalOpen","menuOpen","setMenuOpen","order","setOrder","modalToggle","menuToggle","sortByMarketCap","sortByVolume","coinrankingApi","isFetching","isCoinsFetching","coins","newsApi","isNewsFetching","pageSize","articles"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ClickAwayListener from \"react-click-away-listener\";\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectToken, setUser } from \"../../features/auth/authSlice\";\r\nimport { selectKeyword, setNews } from \"../../features/news/newsSlice\";\r\n\r\nimport { setCoins } from \"../../features/coins/coinsSlice\";\r\n\r\n// Components\r\nimport Spinner from \"../../components/loader/Spinner.jsx\";\r\nimport CoinCard from \"../../components/coincard/CoinCard.jsx\";\r\nimport CoinBar from \"../../components/coinbar/CoinBar.jsx\";\r\nimport WatchList from \"../../components/watchlist/WatchList.jsx\";\r\nimport WatchListModal from \"../../components/watchlist/WatchListModal.jsx\";\r\nimport News from \"../../components/news/News.jsx\";\r\n// Services\r\nimport { useGetCoinsQuery, useGetNewsQuery } from \"../../services/cryptoApi\";\r\n// Firebase\r\nimport { db } from \"../../firebase/firebase.config\";\r\nimport { doc, onSnapshot } from \"firebase/firestore\";\r\n\r\nconst Dashboard = () => {\r\n  const dispatch = useDispatch();\r\n  const token = useSelector(selectToken);\r\n  const keyword = useSelector(selectKeyword);\r\n\r\n  // Get logged user's info from firebase after successful login\r\n  useEffect(() => {\r\n    if (token) {\r\n      console.log(token.id);\r\n      const getUser = () => {\r\n        onSnapshot(doc(db, \"users\", token.uid), (doc) => {\r\n          dispatch(setUser(doc.data()));\r\n        });\r\n      };\r\n\r\n      getUser();\r\n    }\r\n  }, [dispatch, token]);\r\n\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n\r\n  const [order, setOrder] = useState(\"sortByMarketCap\");\r\n\r\n  // Modal Handler\r\n  const modalToggle = () => {\r\n    setModalOpen(!modalOpen);\r\n  };\r\n\r\n  // Menu Handler\r\n  const menuToggle = () => {\r\n    setMenuOpen(!menuOpen);\r\n  };\r\n\r\n  const sortByMarketCap = () => {\r\n    setOrder(\"sortByMarketCap\");\r\n    setMenuOpen(!menuOpen);\r\n  };\r\n\r\n  const sortByVolume = () => {\r\n    setOrder(\"sortByVolume\");\r\n    setMenuOpen(!menuOpen);\r\n  };\r\n\r\n  // Coinranking API call\r\n  const { data: coinrankingApi, isFetching: isCoinsFetching } =\r\n    useGetCoinsQuery();\r\n\r\n  dispatch(setCoins(coinrankingApi?.data?.coins));\r\n\r\n  // News API call\r\n  const { data: newsApi, isFetching: isNewsFetching } = useGetNewsQuery({\r\n    keyword,\r\n    pageSize: \"4\",\r\n  });\r\n\r\n  dispatch(setNews(newsApi?.articles));\r\n\r\n  return (\r\n    <>\r\n      {(isCoinsFetching || isNewsFetching) && (\r\n        <>\r\n          <div className=\"flex items-center justify-center h-full bg-red-500\">\r\n            <Spinner />\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!isCoinsFetching && !isNewsFetching && (\r\n        <>\r\n          <main className=\"block w-full h-full 2xl:flex\">\r\n            <div className=\"px-10 2xl:py-0 2xl:pl-16 2xl:pr-8 2xl:w-2/3\">\r\n              {/* Coin Card */}\r\n              <section>\r\n                <header className=\"flex items-center justify-between mt-10\">\r\n                  <h1 className=\"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\">\r\n                    Dashboard\r\n                  </h1>\r\n                </header>\r\n\r\n                <div className=\"mt-6\">\r\n                  <CoinCard simplified />\r\n                </div>\r\n              </section>\r\n\r\n              {/* Coin Bar */}\r\n              <section className=\"p-8 mt-10 bg-white drop-shadow-xl rounded-3xl dark:bg-secondary\">\r\n                <header className=\"flex items-center justify-between\">\r\n                  <div className=\"relative\">\r\n                    <h1\r\n                      className=\"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\"\r\n                      onClick={menuToggle}\r\n                    >\r\n                      Top 15 Cryptocurrency by\r\n                    </h1>\r\n                    {menuOpen && (\r\n                      <>\r\n                        <ClickAwayListener onClickAway={menuToggle}>\r\n                          <div className=\"absolute left-0 z-10 w-56 mt-2 origin-top-left bg-white rounded-lg shadow-lg dark:bg-secondary ring-1 ring-black ring-opacity-5\">\r\n                            <span\r\n                              className=\"flex px-4 py-3 text-gray-700 rounded-t-lg text-md hover:bg-gray-100 hover:text-gray-900 dark:text-gray-100 dark:hover:text-white dark:hover:bg-tertiary\"\r\n                              onClick={sortByMarketCap}\r\n                            >\r\n                              MarketCap\r\n                            </span>\r\n\r\n                            <span\r\n                              className=\"flex px-4 py-3 text-gray-700 rounded-t-lg text-md hover:bg-gray-100 hover:text-gray-900 dark:text-gray-100 dark:hover:text-white dark:hover:bg-tertiary\"\r\n                              onClick={sortByVolume}\r\n                            >\r\n                              Volume\r\n                            </span>\r\n                          </div>\r\n                        </ClickAwayListener>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n\r\n                  <Link to=\"/coins\">\r\n                    <button className=\"px-5 py-3 text-sm font-medium text-gray-500 transition-colors duration-200 rounded-lg dark:hover:bg-tertiary dark:text-gray-300 hover:bg-gray-200 font-header\">\r\n                      See all\r\n                    </button>\r\n                  </Link>\r\n                </header>\r\n                <div className=\"grid grid-cols-1 gap-6 mt-6 md:grid-cols-2 2xl:grid-cols-3\">\r\n                  <CoinBar order={order} />\r\n                </div>\r\n              </section>\r\n            </div>\r\n\r\n            <div className=\"p-10 2xl:py-0 2xl:pl-8 2xl:pr-16 2xl:w-1/3\">\r\n              {/* Watchlist */}\r\n              <section>\r\n                <header className=\"flex items-center justify-between mt-10\">\r\n                  <h1 className=\"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\">\r\n                    Watchlist\r\n                  </h1>\r\n\r\n                  <button\r\n                    className=\"p-2 transition-colors duration-200 rounded dark:hover:bg-tertiary hover:bg-gray-200 dark:text-gray-300\"\r\n                    onClick={modalToggle}\r\n                  >\r\n                    <svg\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      className=\"w-6 h-6\"\r\n                      fill=\"none\"\r\n                      viewBox=\"0 0 24 24\"\r\n                      stroke=\"currentColor\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth={2}\r\n                        d=\"M12 4v16m8-8H4\"\r\n                      />\r\n                    </svg>\r\n                  </button>\r\n                </header>\r\n\r\n                <div className=\"mt-6\">\r\n                  <WatchList />\r\n\r\n                  {modalOpen && (\r\n                    <>\r\n                      <WatchListModal\r\n                        modalOpen={modalOpen}\r\n                        setModalOpen={setModalOpen}\r\n                      />\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </section>\r\n\r\n              {/* News */}\r\n              <section>\r\n                <header className=\"flex items-center justify-between mt-10\">\r\n                  <h1 className=\"text-2xl text-gray-500 cursor-default dark:text-gray-100 font-header\">\r\n                    News Feed\r\n                  </h1>\r\n\r\n                  <Link to=\"/news\">\r\n                    <button className=\"px-5 py-3 text-sm font-medium text-gray-500 transition-colors duration-200 rounded-lg dark:hover:bg-tertiary dark:text-gray-300 hover:bg-gray-200 font-header\">\r\n                      See all\r\n                    </button>\r\n                  </Link>\r\n                </header>\r\n\r\n                <div className=\"mt-6\">\r\n                  <News />\r\n                </div>\r\n              </section>\r\n            </div>\r\n          </main>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}