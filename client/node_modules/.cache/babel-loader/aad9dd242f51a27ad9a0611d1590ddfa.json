{"ast":null,"code":"import _regeneratorRuntime from\"D:/webdev/Project/react/crypto-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/webdev/Project/react/crypto-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/webdev/Project/react/crypto-dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{BrowserRouter as Router,Switch,Route}from\"react-router-dom\";// Components\nimport SignIn from\"./pages/signinpage/SignIn\";import SignUp from\"./pages/signuppage/SignUp\";import Sidebar from\"./components/sidebar/Sidebar\";import NavBar from\"./components/navbar/Navbar\";import Home from\"./pages/homepage/Home\";import CoinInfo from\"./pages/coininfopage/CoinInfo\";import Account from\"./pages/accountpage/Account\";// Firebase\nimport{db}from\"./firebase/firebase.config\";import{doc,getDoc}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){// States\nvar _useState=useState({name:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),token=_useState6[0],setToken=_useState6[1];// firebase auth\nvar _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];// firestore\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLogged=_useState10[0],setIsLogged=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),coins=_useState12[0],setCoins=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),search=_useState14[0],setSearch=_useState14[1];/*   useEffect(() => {\r\n    window.localStorage.setItem(\"userToken\", isLogged);\r\n    setIsLogged(JSON.parse(window.localStorage.getItem(\"userToken\")));\r\n  }, [isLogged]); */useEffect(function(){// Get logged user's info from firebase after successful login\nif(token){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var docRef,docSnap;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:docRef=doc(db,\"users\",token.uid);_context.next=3;return getDoc(docRef);case 3:docSnap=_context.sent;setUser(docSnap.data());case 5:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();}},[token]);useEffect(function(){if(isLogged){// Coinranking API call\nvar coinRankingOptions={method:\"GET\",url:\"https://coinranking1.p.rapidapi.com/coins\",headers:{\"x-rapidapi-host\":\"coinranking1.p.rapidapi.com\",\"x-rapidapi-key\":process.env.REACT_APP_COINRANKING_API_KEY}};axios.request(coinRankingOptions).then(function(res){var parsed=JSON.parse(JSON.stringify(res));setCoins(parsed.data.data.coins);}).catch(function(err){console.error(err);});}},[isLogged]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Router,{basename:process.env.PUBLIC_URL,children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(SignUp,{form:form,setForm:setForm,errorMessage:errorMessage,setErrorMessage:setErrorMessage,setToken:setToken})}),token&&isLogged?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-full bg-gray-50 justify-items-center\",children:[/*#__PURE__*/_jsx(NavBar,{setToken:setToken,user:user,setUser:setUser,setIsLogged:setIsLogged,coins:coins,setCoins:setCoins,search:search,setSearch:setSearch}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",children:/*#__PURE__*/_jsx(Home,{coins:coins})}),/*#__PURE__*/_jsx(Route,{path:\"/cryptocurrencies/:uuid\",children:/*#__PURE__*/_jsx(CoinInfo,{coins:coins})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",children:/*#__PURE__*/_jsx(Account,{setToken:setToken,user:user,setIsLogged:setIsLogged})})]})]})]})}):/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(SignIn,{form:form,setForm:setForm,errorMessage:errorMessage,setErrorMessage:setErrorMessage,setToken:setToken,isLogged:isLogged,setIsLogged:setIsLogged})})]})})});};export default App;","map":{"version":3,"sources":["D:/webdev/Project/react/crypto-dashboard/client/src/App.js"],"names":["React","useState","useEffect","axios","BrowserRouter","Router","Switch","Route","SignIn","SignUp","Sidebar","NavBar","Home","CoinInfo","Account","db","doc","getDoc","App","name","email","password","form","setForm","errorMessage","setErrorMessage","token","setToken","user","setUser","isLogged","setIsLogged","coins","setCoins","search","setSearch","getUser","docRef","uid","docSnap","data","coinRankingOptions","method","url","headers","process","env","REACT_APP_COINRANKING_API_KEY","request","then","res","parsed","JSON","parse","stringify","catch","err","console","error","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\n// Components\r\nimport SignIn from \"./pages/signinpage/SignIn\";\r\nimport SignUp from \"./pages/signuppage/SignUp\";\r\nimport Sidebar from \"./components/sidebar/Sidebar\";\r\nimport NavBar from \"./components/navbar/Navbar\";\r\nimport Home from \"./pages/homepage/Home\";\r\nimport CoinInfo from \"./pages/coininfopage/CoinInfo\";\r\nimport Account from \"./pages/accountpage/Account\";\r\n\r\n// Firebase\r\nimport { db } from \"./firebase/firebase.config\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nconst App = () => {\r\n  // States\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [token, setToken] = useState(\"\"); // firebase auth\r\n  const [user, setUser] = useState(\"\"); // firestore\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const [coins, setCoins] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  /*   useEffect(() => {\r\n    window.localStorage.setItem(\"userToken\", isLogged);\r\n    setIsLogged(JSON.parse(window.localStorage.getItem(\"userToken\")));\r\n  }, [isLogged]); */\r\n\r\n  useEffect(() => {\r\n    // Get logged user's info from firebase after successful login\r\n    if (token) {\r\n      const getUser = async () => {\r\n        const docRef = doc(db, \"users\", token.uid);\r\n        const docSnap = await getDoc(docRef);\r\n\r\n        setUser(docSnap.data());\r\n      };\r\n\r\n      getUser();\r\n    }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (isLogged) {\r\n      // Coinranking API call\r\n      const coinRankingOptions = {\r\n        method: \"GET\",\r\n        url: \"https://coinranking1.p.rapidapi.com/coins\",\r\n        headers: {\r\n          \"x-rapidapi-host\": \"coinranking1.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": process.env.REACT_APP_COINRANKING_API_KEY,\r\n        },\r\n      };\r\n\r\n      axios\r\n        .request(coinRankingOptions)\r\n        .then(function (res) {\r\n          const parsed = JSON.parse(JSON.stringify(res));\r\n          setCoins(parsed.data.data.coins);\r\n        })\r\n        .catch(function (err) {\r\n          console.error(err);\r\n        });\r\n    }\r\n  }, [isLogged]);\r\n\r\n  return (\r\n    <>\r\n      <Router basename={process.env.PUBLIC_URL}>\r\n        <Switch>\r\n          <Route path=\"/signup\">\r\n            <SignUp\r\n              form={form}\r\n              setForm={setForm}\r\n              errorMessage={errorMessage}\r\n              setErrorMessage={setErrorMessage}\r\n              setToken={setToken}\r\n            />\r\n          </Route>\r\n\r\n          {token && isLogged ? (\r\n            <>\r\n              <div className=\"flex flex-row\">\r\n                <Sidebar />\r\n                <div className=\"flex flex-col w-full bg-gray-50 justify-items-center\">\r\n                  <NavBar\r\n                    setToken={setToken}\r\n                    user={user}\r\n                    setUser={setUser}\r\n                    setIsLogged={setIsLogged}\r\n                    coins={coins}\r\n                    setCoins={setCoins}\r\n                    search={search}\r\n                    setSearch={setSearch}\r\n                  />\r\n                  <Switch>\r\n                    <Route path=\"/dashboard\">\r\n                      <Home coins={coins} />\r\n                    </Route>\r\n                    <Route path=\"/cryptocurrencies/:uuid\">\r\n                      <CoinInfo coins={coins} />\r\n                    </Route>\r\n                    <Route path=\"/profile\">\r\n                      <Account\r\n                        setToken={setToken}\r\n                        user={user}\r\n                        setIsLogged={setIsLogged}\r\n                      />\r\n                    </Route>\r\n                  </Switch>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <Route path=\"/\" exact>\r\n              <SignIn\r\n                form={form}\r\n                setForm={setForm}\r\n                errorMessage={errorMessage}\r\n                setErrorMessage={setErrorMessage}\r\n                setToken={setToken}\r\n                isLogged={isLogged}\r\n                setIsLogged={setIsLogged}\r\n              />\r\n            </Route>\r\n          )}\r\n        </Switch>\r\n      </Router>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}